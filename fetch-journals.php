<?php

/*

Harvest ZooBank journals as HTML so we can extract ISSN, etc.

*/

error_reporting(E_ALL);

require_once (dirname(__FILE__) . '/utils.php');

$uuids=array(
'78F99150-21C2-4639-B359-F3E2302DF0B7',
'91BD42D4-90F1-4B45-9350-EEF175B1727A',
'61BDA2D4-7D0B-4079-8A4E-9A1E51808231',
'E3A3A004-5349-4323-B12E-A6A47A6FC5E5',
'50F97DF3-6CA3-4221-9AA6-B7C0906F57C3',
'F8B3D697-5C15-402B-8B8F-EC72B2C329E4',
'149728AF-8376-4AE2-A001-0734F28390FC',
'D684BB7D-B757-4497-9491-BEEB4C719B56',
'ED34F394-2E4C-49D6-8300-0DC18F233E6C',
'9BB50B84-8914-4078-93BE-878694829C2A',
'57578F2E-630F-4107-ACA4-2E5C0B9AB400',
'C81E3374-EA75-46AE-BE06-06A7C863005C',
'916FF81B-F8BE-4B9B-A41F-4F4670BCD156',
'C07896CA-EAD4-4CF0-9F50-939C8905E93C',
'166A3508-46F8-4AEF-A9ED-FCDC3E114188',
'318AA1CE-3E85-454A-BFD6-C923E6EE25DC',
'F68170DB-2D9F-4F52-B55C-175AD7A9B739',
'A2F794AA-2039-4F44-8B5C-30916460A731',
'82EC3E39-D02F-40D3-ABF2-46CC8FBF93B5',
'FC19C9AF-380C-4840-9389-7EC9228140A9',
'6493D49D-411F-4439-B6E8-8A14FB168881',
'20C3A481-692F-41B2-A797-F62C76BBE7AA',
'A76F3F41-70B5-43D0-9C48-5FC55DB58F84',
'469415E6-AC80-4A91-9F2E-F7FB09129DBE',
'0ACC75CE-DD56-49B1-9377-AA688C4E4EC0',
'F819257A-07F2-442B-907B-E31E39D63A31',
'B18C1083-63A5-4C61-826B-37D28CAF577B',
'CAE1DAB0-8CCC-419A-A374-B30F46A74CC6',
'05B7590B-0601-41E6-9EB7-06E9D4171731',
'C1690EDD-AF71-4796-B649-DB062E3DF1A4',
'4B0FB9C5-4BE9-4A41-8BA6-2C2FD3522FC1',
'6E1F2161-5DDF-4EA4-AF2D-35F7A91D315B',
'1F938786-DCC5-4D49-B6C1-B05534F5154D',
'32A9A7E4-64EE-4A0D-B7B0-AE0447304E26',
'1974CBFB-D89C-4CB1-8DB6-D40F917F311E',
'FF8919B6-C581-43C0-97BE-DEA513D6933C',
'56E38E3D-790A-4E40-B08C-3446C28B231D',
'CB1FE053-EF7F-4A5F-B92D-49A198CCC6B3',
'79D07ED7-519D-4A75-BA29-3C6D626AC9F4',
'F15A83B6-E37B-4268-A598-E42DF0F637AA',
'C1A373DB-6541-4B5D-93A8-A051E072484E',
'6F4FB299-E60F-4DA8-A2AB-0C25BD04B5FB',
'1F8FA705-FA85-4A7A-8711-1878E68A14E5',
'1B62BFF7-ABE1-4082-B44C-BD00EF28FBB8',
'50652332-E742-43B6-BA21-73E10015FAA5',
'C9673F1A-451F-41AD-94EA-E192C4269966',
'19418F15-A7C3-4676-B4FC-3CC0DB38396C',
'E41BE82D-DDBD-4DD2-A503-20158B98EE93',
'AE4BFD7F-2115-4641-B0B5-A9E475B55C1D',
'ECF8745E-9303-4EFE-B178-A58C1A5B022D',
'32B01416-D80D-4B80-A8DA-51C312813A4F',
'D75B3990-0D5D-4893-BCAB-B0CEE354A4C6',
'F2BC67D5-0593-4E61-BFC0-662DDA3B58DC',
'75E55A55-EF18-4C4F-8DC7-611EA6C712F2',
'E7216665-0790-40DF-8B38-646097387904',
'1E0C89D0-409C-4771-B42A-E82F366FEDC1',
'878715B3-D402-4C1F-A4CD-F2E695921267',
'A05EDC9F-A7F3-4D78-BF7A-A8DB323F6C6A',
'D4A47C06-A53C-441B-943E-547DC83608E3',
'A4D1436F-2589-4CFE-BE5E-5E7C270018CF',
'6F91465E-5DD1-49C9-97D9-8761B7A5AC61',
'ED46E095-D593-4874-B364-F3ABD6DD2E07',
'41A3F06C-A6A9-460B-90B0-6D6D3C8E6E61',
'1844BE5A-0544-40ED-BB45-F5D21A4AC887',
'4C657076-9E76-4AEF-80DA-B381776FADDD',
'CAE706D0-C0AB-4EF1-8954-8FB9D63D64CE',
'4621F820-9280-4155-BEF6-18EA8EDD5DF7',
'A7443EC9-144F-4230-976E-8B34452F167A',
'00801672-027A-40DF-8E39-40F4AC93B399',
'99C12253-3F77-42D6-98A1-77696B01FEED',
'12D06896-92BB-454F-879F-762637187755',
'B78E5307-C0BE-41BF-9881-0C77DF8CF18D',
'52806305-9E67-4CA8-8119-4ABF3924A1A0',
'129A9D4E-4CC8-4BF1-846E-870E0D4084AE',
'EFF95BE2-433D-4420-BD51-AC26CEF4F6A1',);


$skip_list = array(

);

$force = false;

$basedir = dirname(__FILE__) . '/html';

$count = 1;

foreach ($uuids as $uuid)
{
	echo $uuid  . "\n";
	
	$uuid = strtolower($uuid);
	
	if (in_array($uuid, $skip_list))
	{
		echo "\n\n*** skip ***\n\n";
	
		continue;
	}
	
	$url = 'http://zoobank.org/References/' . $uuid;
		
	$filename = $basedir  . '/' . $uuid . '.html';
	
	echo $filename . "\n";
	
	$go = true;
	
	if (file_exists($filename) && !$force)
	{
		echo "File exists\n";
		$go = false;
	}
	
	if ($go)
	{
				
		$html = get($url);						
		file_put_contents($filename, $html);
	}
	
		// Give server a break every 10 items
	if (($count++ % 10) == 0)
	{
		$rand = rand(1000000, 3000000);
		echo "\n-- ...sleeping for " . round(($rand / 1000000),2) . ' seconds' . "\n\n";
		usleep($rand);
	}

	
}

?>
